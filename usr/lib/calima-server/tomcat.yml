tomcat:
  container_name: tomcat
  mem_limit: 2697986048
  image: tomcat:9-jdk11-adoptopenjdk-openj9
  ports:
    - 8081:8080
  links:
    - postgres
  environment:
    JAVA_OPTS: -XX:-AggressiveHeap -Xmx1929m -Djdk.tls.ephemeralDHKeySize=2048 -Xgcpolicy=metronome -Xgc:targetUtilization=80 -Xgc:targetPauseTime=10 -Xtune:virtualized -XX:+IdleTuningGcOnIdle -Xshareclasses -XX:SharedCacheHardLimit=200m -Xscmx60m -DShowLog=true -Djava.awt.headless=true -Duser.timezone=GMT-3 -Duser.language=pt -Duser.country=BR -Dcalima.datasource.url=jdbc:postgresql://postgres:5432/calima
  volumes:
    - ~/.calima-server/tomcat/webapps/calima.war:/usr/local/tomcat/webapps/calima.war:ro
    - ~/.calima-server/tomcat/conf/context.xml:/usr/local/tomcat/conf/context.xml:ro
    - ~/.calima-server/tomcat/work:/usr/local/tomcat/work
    - /dev/null:/usr/local/tomcat/webapps/ROOT/index.jsp:ro
    - /dev/null:/usr/local/tomcat/webapps/ROOT/index.htm:ro
